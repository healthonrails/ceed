

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Function Interface &mdash; Ceed  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Function plugins" href="function_plugin.html" />
    <link rel="prev" title="&lt;no title&gt;" href="api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Ceed
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../blueprint.html">System Blueprint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apps/apps.html">Ceed Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config.html">CEED Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optics/optics.html">Microscope optics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">The Ceed API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ceed.html">Ceed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/analysis.html">Ceed data analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analysis/merge_data.html">Ceed-MCS data merging</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Function Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#function-factory-and-plugins">Function factory and plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#default-function-instances">Default function instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-basics">Function basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-domain-and-monotonicity">Function domain and monotonicity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-timebase">Function timebase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#saving-and-restoring-functions">Saving and restoring functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference-functions">Reference functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copying-functions">Copying functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customizing-function-in-the-gui">Customizing function in the GUI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="function_plugin.html">Function plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="widgets.html">Function Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shape/shape.html">Shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shape/widgets.html">Shape Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage/stage.html">Stages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stage/widgets.html">Stage widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../view/view.html">Projector View</a></li>
<li class="toctree-l2"><a class="reference internal" href="../view/view_widgets.html">Viewer widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../view/controller.html">View Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../view/main.html">Ceed View App</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/storage.html">Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage/controller.html">Storage Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../player.html">Video Player</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graphics/graphics.html">Graphcs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../example_code/example_code.html">Example Analysis Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Ceed</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../api.html">The Ceed API</a> &raquo;</li>
        
          <li><a href="api.html">&lt;no title&gt;</a> &raquo;</li>
        
      <li>Function Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/api/function/function.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-ceed.function"></span><div class="section" id="function-interface">
<h1>Function Interface<a class="headerlink" href="#function-interface" title="Permalink to this headline">¶</a></h1>
<p>Defines the functions used with <a class="reference internal" href="../shape/shape.html#module-ceed.shape" title="ceed.shape"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.shape</span></code></a> to create time-varying
intensities of the shapes during an experiment. <a class="reference internal" href="../stage/stage.html#module-ceed.stage" title="ceed.stage"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.stage</span></code></a> combines
functions with shapes and visualizes them during a stage in an experiment.</p>
<p>Although the functions’ range is <code class="docutils literal notranslate"><span class="pre">(-infinity,</span> <span class="pre">+infinity)</span></code> and this module
places no restriction on the function output so that it may return any
scalar value, the graphics system can only accept values in the <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1]</span></code>
range for each red, green, or blue channel. Consequently, the graphics system
(at <a class="reference internal" href="../stage/stage.html#ceed.stage.StageFactoryBase.fill_shape_gl_color_values" title="ceed.stage.StageFactoryBase.fill_shape_gl_color_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ceed.stage.StageFactoryBase.fill_shape_gl_color_values()</span></code></a>) will clip
the function output to that range.</p>
<div class="section" id="function-factory-and-plugins">
<h2>Function factory and plugins<a class="headerlink" href="#function-factory-and-plugins" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> is a store of the defined <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a>
sub-classes and customized function instances. Function classes/instances
registered with the <a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> instance used by the
the GUI are available to the user in the GUI. During analysis, functions are
similarly registered with the <a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> instance used in the
analysis and can then be used to get these functions. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># create the function store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span> <span class="o">=</span> <span class="n">FunctionFactoryBase</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">register_all_functions</span><span class="p">(</span><span class="n">function_factory</span><span class="p">)</span>  <span class="c1"># register plugins</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LinearFunc</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;LinearFunc&#39;</span><span class="p">)</span>  <span class="c1"># get the class</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">LinearFunc</span>
<span class="go">ceed.function.plugin.LinearFunc</span>
</pre></div>
</div>
<p>Classes can be registered with manually with
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.register()</span></code></a> or they can be registered automatically
with <a class="reference internal" href="#ceed.function.register_all_functions" title="ceed.function.register_all_functions"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_all_functions()</span></code></a> if they are a plugin or a built in
function. See <a class="reference internal" href="function_plugin.html#module-ceed.function.plugin" title="ceed.function.plugin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function.plugin</span></code></a> for details.</p>
<p>To get a function class registered with <code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code>, e.g.
<a class="reference internal" href="function_plugin.html#ceed.function.plugin.CosFunc" title="ceed.function.plugin.CosFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.plugin.CosFunc</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CosFunc</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>  <span class="c1"># using class name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CosFunc</span>
<span class="go">ceed.function.plugin.CosFunc</span>
</pre></div>
</div>
</div>
<div class="section" id="default-function-instances">
<h2>Default function instances<a class="headerlink" href="#default-function-instances" title="Permalink to this headline">¶</a></h2>
<p>When a function class is registered, we create a default instance of the class,
and that instance is accessible at <a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="ceed.function.FunctionFactoryBase.funcs_inst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FunctionFactoryBase.funcs_inst</span></code></a>
and from the GUI where a list of function names listed in
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="ceed.function.FunctionFactoryBase.funcs_inst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FunctionFactoryBase.funcs_inst</span></code></a> is shown.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">funcs_inst</span>
<span class="go">{&#39;Group&#39;: &lt;ceed.function.FuncGroup at 0x2a351743c88&gt;,</span>
<span class="go"> &#39;Const&#39;: &lt;ceed.function.plugin.ConstFunc at 0x2a351743e48&gt;,</span>
<span class="go"> &#39;Linear&#39;: &lt;ceed.function.plugin.LinearFunc at 0x2a351743c18&gt;,</span>
<span class="go"> &#39;Exp&#39;: &lt;ceed.function.plugin.ExponentialFunc at 0x2a351743f98&gt;,</span>
<span class="go"> &#39;Cos&#39;: &lt;ceed.function.plugin.CosFunc at 0x2a351743eb8&gt;}</span>
</pre></div>
</div>
<p>We can also add customized function instances to be available to the user
with <a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.add_func()</span></code></a>.
They need to have unique names, by which we access them from the GUI or from
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="ceed.function.FunctionFactoryBase.funcs_inst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FunctionFactoryBase.funcs_inst</span></code></a>. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">LinearFunc</span><span class="p">(</span><span class="n">function_factory</span><span class="o">=</span><span class="n">function_factory</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">funcs_inst</span>
<span class="go">{...</span>
<span class="go"> &#39;Cos&#39;: &lt;ceed.function.plugin.CosFunc at 0x1da866f0ac8&gt;,</span>
<span class="go"> &#39;line&#39;: &lt;ceed.function.plugin.LinearFunc at 0x1da866f0278&gt;}</span>
</pre></div>
</div>
<p>The name will be automatically changed if a function with the given name
already exists when it is registered. E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">LinearFunc</span><span class="p">(</span><span class="n">function_factory</span><span class="o">=</span><span class="n">function_factory</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">LinearFunc</span><span class="p">(</span><span class="n">function_factory</span><span class="o">=</span><span class="n">function_factory</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;line&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;line-2&#39;</span>
</pre></div>
</div>
<p>To use a registered function instance, it needs to be copied before it can be
used. e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">function_factory</span><span class="o">.</span><span class="n">funcs_inst</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">init_func</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="function-basics">
<h2>Function basics<a class="headerlink" href="#function-basics" title="Permalink to this headline">¶</a></h2>
<p>A function inherits from <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> that defines the interface and
returns a (stateful) number when called with a time argument.</p>
<p>Ceed functions are not like typical functions that can be called with any
value, rather, they keep some internal state, which determines what its
current domain is. Specifically, functions may only be called with
monotonically increasing time values, like we do in an experiment where time
always monotonically increases. Here’s some example basic function
usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; # function factory stores all the available function types (classes)
&gt;&gt;&gt; function_factory = FunctionFactoryBase()
&gt;&gt;&gt; # register all plugin functions
&gt;&gt;&gt; register_all_functions(function_factory)
&gt;&gt;&gt; # get cosine function class.
&gt;&gt;&gt; CosFunc = function_factory.get(&#39;CosFunc&#39;)
&gt;&gt;&gt; # cos will have amplitude of 10, frequency of 1Hz and 10s deuration
&gt;&gt;&gt; f = CosFunc(function_factory=function_factory, duration=10, A=10, f=1)
&gt;&gt;&gt; f
&lt;ceed.function.plugin.CosFunc at 0x4eadba8&gt;
&gt;&gt;&gt; # we must specify the time axis. All subsequent times passed to the
&gt;&gt;&gt; # function will be relative to the time given here (3 seconds).
&gt;&gt;&gt; f.init_func(3)
&gt;&gt;&gt; f(3)  # evaluate the function at time 3 - 3 = 0 seconds
10.0
&gt;&gt;&gt; f(3.25)  # now at 3.25 - 3 = 0.25 seconds
6.123233995736766e-16
&gt;&gt;&gt; f(3.5)
-10.0
&gt;&gt;&gt; f(15)  # calling outside the domain raises an exception
Traceback (most recent call last):
File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 1042, in __call__
    raise FuncDoneException
ceed.function.FuncDoneException
</pre></div>
</div>
<p>Before a function can be used, it must be initialized with
<a class="reference internal" href="#ceed.function.FuncBase.init_func" title="ceed.function.FuncBase.init_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.init_func()</span></code></a>. It takes a time value in seconds where the domain
of the function starts. This is how we can evaluate the function independant of
the baseline time. E.g. if a function computes <code class="docutils literal notranslate"><span class="pre">f(t)</span> <span class="pre">=</span> <span class="pre">m</span> <span class="pre">*</span> <span class="pre">t</span> <span class="pre">+</span> <span class="pre">b</span></code>, it’ll
actually always be computed as <code class="docutils literal notranslate"><span class="pre">f(t)</span> <span class="pre">=</span> <span class="pre">m</span> <span class="pre">*</span> <span class="pre">(t</span> <span class="pre">-</span> <span class="pre">t_start)</span> <span class="pre">+</span> <span class="pre">b</span></code>, where
<a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.t_start</span></code></a> is the value passed to <a class="reference internal" href="#ceed.function.FuncBase.init_func" title="ceed.function.FuncBase.init_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.init_func()</span></code></a>.</p>
<p>To evaluate the function, just call it with a time value as in the example
above.</p>
</div>
<div class="section" id="function-domain-and-monotonicity">
<h2>Function domain and monotonicity<a class="headerlink" href="#function-domain-and-monotonicity" title="Permalink to this headline">¶</a></h2>
<p>Functions have a domain, as determined by <a class="reference internal" href="#ceed.function.FuncBase.get_domain" title="ceed.function.FuncBase.get_domain"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_domain()</span></code></a>.
By default the domain for a function is [<a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.t_start</span></code></a>,
<a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.t_start</span></code></a> +
<a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.duration</span></code></a> * <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_timebase()</span></code></a>).
<a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.duration</span></code></a> can <code class="docutils literal notranslate"><span class="pre">-1</span></code>, indicating the domain extends to
+infinity. <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_timebase()</span></code></a> allows one to state the
<a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.duration</span></code></a> in <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.timebase</span></code></a> units, for better
accuracy, rather than in seconds. If a function
loops (<a class="reference internal" href="#ceed.function.FuncBase.loop" title="ceed.function.FuncBase.loop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.loop</span></code></a>), the domain extends until the end of the loops.</p>
<p>The domain always starts at <a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.t_start</span></code></a>, but
<a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.t_start</span></code></a> is updated internally for each loop to the time at the
start of the current loop. So the domain gets smaller as we iterate the loops.
E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; LinearFunc = function_factory.get(&#39;LinearFunc&#39;)
&gt;&gt;&gt; # slope of 2, with 2 loop iterations
&gt;&gt;&gt; f = LinearFunc(function_factory=function_factory, duration=10, loop=2, m=2)
&gt;&gt;&gt; f.loop
2
&gt;&gt;&gt; f.init_func(2)  # the valid domain starts at 2 seconds
&gt;&gt;&gt; f(0)  # zero seconds is outside the domain
Traceback (most recent call last):
    File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 1032, in __call__
ValueError: Cannot call function &lt;ceed.function.plugin.LinearFunc object at 0x000001B66B022DD8&gt; with time less than the function start 2
&gt;&gt;&gt; f(2)  # intercept at 2 - 2 = 0 seconds is zero
0.0
&gt;&gt;&gt; f.t_start
2
&gt;&gt;&gt; f.loop_count  # it&#39;s in the first loop iteration
0
&gt;&gt;&gt; f.get_domain()
(2, Fraction(22, 1))
&gt;&gt;&gt; f(10)  # value of time at 10 - 2 = 8 seconds
16.0
&gt;&gt;&gt; # now we called it with a time value at the end of the first loop
&gt;&gt;&gt; # i.e. 12 seconds is 2 + 10, which is the duration of the function,
&gt;&gt;&gt; # so it automatically increments the loop and updates t_start
&gt;&gt;&gt; f(12)
0.0
&gt;&gt;&gt; f.t_start
Fraction(12, 1)
&gt;&gt;&gt; f.loop_count
1
&gt;&gt;&gt; f.get_domain()  # the valid domain has updated
(Fraction(12, 1), Fraction(22, 1))
&gt;&gt;&gt; f(20)
16.0
&gt;&gt;&gt; f(22)  # finally this is the end of the second loop end of domain
Traceback (most recent call last):
    File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 1042, in __call__
ceed.function.FuncDoneException
&gt;&gt;&gt; f.loop_count
2
&gt;&gt;&gt; # there&#39;s no more valid domain left
&gt;&gt;&gt; f.get_domain()
(Fraction(22, 1), Fraction(22, 1))
&gt;&gt;&gt; f(20)  # function may only be called monotonically, it won&#39;t always
&gt;&gt;&gt; # raise an error if called non-monotonically, but generally it will
Traceback (most recent call last):
    File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 1034, in __call__
ceed.function.FuncDoneException
</pre></div>
</div>
<p>As seen above, the domain of a function changes as it’s called with time
values. Consequently, functions may only be called with monotonically
increasing time arguments. If violated, it may raise an error, but it doesn’t
always. Calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.add_func()</span></code> resets to function, however, so
ot can be called again.</p>
<p>This rule is required to support functions that perform some IO and
therefore may change some state, so calling with the same time input multiple
times may not make sense. Similarly, we combine functions in a group (e.g.
function A, then B etc), so once we finish function A of the group and moved
to B, we don’t support moving to function A again, unless we are in the next
loop. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; ConstFunc = function_factory.get(&#39;ConstFunc&#39;)
&gt;&gt;&gt; FuncGroup = function_factory.get(&#39;FuncGroup&#39;)
&gt;&gt;&gt; # two constant functions that output a, and 10 respectively
&gt;&gt;&gt; f1 = ConstFunc(function_factory=function_factory, duration=2, a=2)
&gt;&gt;&gt; f2 = ConstFunc(function_factory=function_factory, duration=2, a=10)
&gt;&gt;&gt; # create a function group of two sequential constant functions
&gt;&gt;&gt; f = FuncGroup(function_factory=function_factory, loop=2)
&gt;&gt;&gt; f.add_func(f1)
&gt;&gt;&gt; f.add_func(f2)
&gt;&gt;&gt; f.init_func(1)
&gt;&gt;&gt; f.get_domain()
(1, Fraction(9, 1))
&gt;&gt;&gt; f(1)  # this is internally calling f1
2
&gt;&gt;&gt; f(3)  # now we&#39;re calling f2 internally since we past the 2s duration
10
&gt;&gt;&gt; # even though the domain is still the same, we cannot call it now with
&gt;&gt;&gt; # a value less than 3 (because it&#39;d have to jump back to f1 and
&gt;&gt;&gt; # we don&#39;t need or support that)
&gt;&gt;&gt; f.get_domain()
(1, Fraction(9, 1))
&gt;&gt;&gt; f.loop_count
0
&gt;&gt;&gt; f(5)
2
&gt;&gt;&gt; f.loop_count
1
&gt;&gt;&gt; f(7)
10
&gt;&gt;&gt; f(9)
Traceback (most recent call last):
    File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 1341, in __call__
ceed.function.FuncDoneException
</pre></div>
</div>
</div>
<div class="section" id="function-timebase">
<h2>Function timebase<a class="headerlink" href="#function-timebase" title="Permalink to this headline">¶</a></h2>
<p>As alluded to above, functions have a optional timebase to help be more
precise with the function duration. Normally, the <a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.duration</span></code></a>
is set in seconds to the duration the function should take. But if the
projector is going at say 120 frames per second (fps), we may want to e.g.
set the shape to be intensity 1 for frame 0 (<code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">0</span> <span class="pre">/</span> <span class="pre">120</span></code>) and intensity
0.5 for frame 1 (<code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">/</span> <span class="pre">120</span></code>). Expressing
<code class="docutils literal notranslate"><span class="pre">duration</span> <span class="pre">=</span> <span class="pre">1</span> <span class="pre">/</span> <span class="pre">120</span> <span class="pre">=</span> <span class="pre">0.008333333333333333</span></code> is not possible with decimal
math. Consequently, we allow setting the <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.timebase</span></code></a>.</p>
<p><a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.timebase</span></code></a> determines the units of the
<a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.duration</span></code></a>. If it’s zero, then the units is in seconds, like
normal. If it’s non-zero, e.g. the fraction <code class="docutils literal notranslate"><span class="pre">Fraction(1,</span> <span class="pre">120)</span></code>, then
duration is multiplied by it to get the duration in seconds. So e.g. with
<code class="docutils literal notranslate"><span class="pre">Fraction(1,</span> <span class="pre">120)</span></code>, if duration is <code class="docutils literal notranslate"><span class="pre">12</span></code>, then the stage duration is
<code class="docutils literal notranslate"><span class="pre">12/120</span></code> seconds, or 12 frames.</p>
<p>During an experimental stage when functions are called, we pass time
represented as fractions where the denominator represents the true framerate
of the projector, and the time value is the elapsed time since the start. So
e.g. we’d call it with <code class="docutils literal notranslate"><span class="pre">f(Fraction(180,</span> <span class="pre">120))</span></code> if we are 1.5 seconds into
the stage and the projector frame rate is <code class="docutils literal notranslate"><span class="pre">120</span></code>. This allows us to do more
precise duration math. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; from fractions import Fraction
&gt;&gt;&gt; # duration will be 2 frames at 120 fps (2/120 seconds)
&gt;&gt;&gt; f = LinearFunc(function_factory=function_factory, duration=2, timebase_numerator=1, timebase_denominator=120, m=2)
&gt;&gt;&gt; f.init_func(1)  # start at 1 sec
&gt;&gt;&gt; f.get_domain()
(1, Fraction(61, 60))
&gt;&gt;&gt; f.get_timebase()  # this is what we need to use to get the timebase
Fraction(1, 120)
&gt;&gt;&gt; f.timebase
Fraction(1, 120)
&gt;&gt;&gt; f(Fraction(120, 120))  # calling it t=frame 0 at 120fps
0.0
&gt;&gt;&gt; f(Fraction(121, 120))  # calling it t=frame 1 at 120fps
0.016666666666666666
&gt;&gt;&gt; f(Fraction(122, 120))  # calling it t=frame 2 at 120fps
Traceback (most recent call last):
    File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 1150, in __call__
ceed.function.FuncDoneException
</pre></div>
</div>
<p>Functions can be grouped, e.g. in the example above. We don’t want to have to
specify the <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.timebase</span></code></a> for each function. Consequently,
functions will inherit the timebase from the function they belong to as a
group all the way to the root. E.g. we want the group function to alternate
between 2 and 10 for each frame at 120fps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; # each sub-function is exactly one frame long
&gt;&gt;&gt; f1 = ConstFunc(function_factory=function_factory, duration=1, a=2)
&gt;&gt;&gt; f2 = ConstFunc(function_factory=function_factory, duration=1, a=10)
&gt;&gt;&gt; # so far the timbease are the defaults
&gt;&gt;&gt; f1.timebase
Fraction(0, 1)
&gt;&gt;&gt; f1.get_timebase()  # it&#39;s in seconds
1
&gt;&gt;&gt; # because we specify a timebase for the group, all the sub-functions
&gt;&gt;&gt; # will share the same timebase. Unless a sub function specifically sets
&gt;&gt;&gt; # its own timebase
&gt;&gt;&gt; f = FuncGroup(function_factory=function_factory, timebase_numerator=1, timebase_denominator=120, loop=2)
&gt;&gt;&gt; f.add_func(f1)
&gt;&gt;&gt; f.add_func(f2)
&gt;&gt;&gt; # now, we inherit the timebase from out parent because we were added
&gt;&gt;&gt; # to a parent and we didn&#39;t set our own timebase
&gt;&gt;&gt; f1.timebase
Fraction(0, 1)
&gt;&gt;&gt; f1.get_timebase()  # our parents timebase
Fraction(1, 120)
&gt;&gt;&gt; f.init_func(1)
&gt;&gt;&gt; f.get_domain()
(1, Fraction(31, 30))
&gt;&gt;&gt; f(Fraction(120, 120))  # loop 0, f1
2
&gt;&gt;&gt; f(Fraction(121, 120))  # loop 0, f2
10
&gt;&gt;&gt; f(Fraction(122, 120))  # loop 1, f1
2
&gt;&gt;&gt; f(Fraction(123, 120))  # loop 1, f2
10
&gt;&gt;&gt; f(Fraction(124, 120))  # done
Traceback (most recent call last):
    File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 1459, in __call__
ceed.function.FuncDoneException
</pre></div>
</div>
<p>As we just saw, unless overwritten by a function, the timebase is inherited
from parent functions if they set it. Therefore, to get the actual timebase use
<a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_timebase()</span></code></a>, instead of <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.timebase</span></code></a>. The latter
is only used to directly set the function’s timebase. Functions that need to
use the timebase should design all the duration values with that in mind.</p>
<p>The downside is that to handle functions in different timebases, they would
need to be replicated for each timebase.</p>
</div>
<div class="section" id="saving-and-restoring-functions">
<h2>Saving and restoring functions<a class="headerlink" href="#saving-and-restoring-functions" title="Permalink to this headline">¶</a></h2>
<p>Functions can be saved as a data dictionary and later restored into a function
instance. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">LinearFunc</span><span class="p">(</span><span class="n">function_factory</span><span class="o">=</span><span class="n">function_factory</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">m</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">state</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">state</span>
<span class="go">{&#39;name&#39;: &#39;line&#39;,</span>
<span class="go"> &#39;cls&#39;: &#39;LinearFunc&#39;,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;timebase_numerator&#39;: 0,</span>
<span class="go"> &#39;timebase_denominator&#39;: 1,</span>
<span class="go"> &#39;noisy_parameters&#39;: {},</span>
<span class="go"> &#39;duration&#39;: 2,</span>
<span class="go"> &#39;t_offset&#39;: 0,</span>
<span class="go"> &#39;m&#39;: 2,</span>
<span class="go"> &#39;b&#39;: 0.0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># this is how we create a function from state</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">make_func</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span>
<span class="go">&lt;ceed.function.plugin.LinearFunc at 0x1a2cf679ac8&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span>
<span class="go">{&#39;name&#39;: &#39;Linear&#39;,</span>
<span class="go"> &#39;cls&#39;: &#39;LinearFunc&#39;,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;timebase_numerator&#39;: 0,</span>
<span class="go"> &#39;timebase_denominator&#39;: 1,</span>
<span class="go"> &#39;noisy_parameters&#39;: {},</span>
<span class="go"> &#39;duration&#39;: 2,</span>
<span class="go"> &#39;t_offset&#39;: 0,</span>
<span class="go"> &#39;m&#39;: 2,</span>
<span class="go"> &#39;b&#39;: 0.0}</span>
</pre></div>
</div>
<p>If you notice, <code class="docutils literal notranslate"><span class="pre">name</span></code> was not restored to the new function. That’s because
<code class="docutils literal notranslate"><span class="pre">name</span></code> is only restored if we pass <code class="docutils literal notranslate"><span class="pre">clone=True</span></code> as name is considered an
internal property and not always user-customizable. E.g. with clone:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">make_func</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">clone</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span>
<span class="go">{&#39;name&#39;: &#39;line&#39;,</span>
<span class="go"> &#39;cls&#39;: &#39;LinearFunc&#39;,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> ...</span>
<span class="go"> &#39;b&#39;: 0.0}</span>
</pre></div>
</div>
</div>
<div class="section" id="reference-functions">
<h2>Reference functions<a class="headerlink" href="#reference-functions" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you may want to create a function group containing other functions.
Instead of explicitly defining these sub-functions, we may want to refer to
existing registered functions and let these sub-functions update when the
existing function’s parameters are updated. They are mostly meant to be used
from the GUI, although work work perfectly otherwise.</p>
<p><a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> allows one to reference functions in such a manner.
Instead of copying a function, just get a reference to it with
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="ceed.function.FunctionFactoryBase.get_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.get_func_ref()</span></code></a> and add it to the function group.</p>
<p>When destroyed, such function references must be explicitly released with
<code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.release_func_ref()</span></code>, otherwise the original function
cannot be deleted in the GUI.</p>
<p>Methods that accept functions (such as <a class="reference internal" href="#ceed.function.FuncGroup.add_func" title="ceed.function.FuncGroup.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncGroup.add_func()</span></code></a>) should also
accept <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> functions.</p>
<p><a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> cannot be used directly, unlike normal function.
Therefore, they or any functions that contain them must first copy them and
expand them to refer to the orignal functions being referenced before using
them with <a class="reference internal" href="#ceed.function.FuncBase.copy_expand_ref" title="ceed.function.FuncBase.copy_expand_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.copy_expand_ref()</span></code></a> or
<code class="xref py py-meth docutils literal notranslate"><span class="pre">CeedFuncRef.copy_expand_ref()</span></code>.</p>
<p>E.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">LinearFunc</span><span class="p">(</span><span class="n">function_factory</span><span class="o">=</span><span class="n">function_factory</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">&lt;ceed.function.plugin.LinearFunc at 0x1a2cf679c18&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_func</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get_func_ref</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_func</span>
<span class="go">&lt;ceed.function.CeedFuncRef at 0x1a2cf74d828&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_func</span><span class="o">.</span><span class="n">func</span>
<span class="go">&lt;ceed.function.plugin.LinearFunc at 0x1a2cf679c18&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">return_func_ref</span><span class="p">(</span><span class="n">ref_func</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="copying-functions">
<h2>Copying functions<a class="headerlink" href="#copying-functions" title="Permalink to this headline">¶</a></h2>
<p>Functions can be copied automatically using <code class="docutils literal notranslate"><span class="pre">deepcopy</span></code> or
<a class="reference internal" href="#ceed.function.FuncBase.copy_expand_ref" title="ceed.function.FuncBase.copy_expand_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.copy_expand_ref()</span></code></a>. The former makes a full copy of all the
functions, but any <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> functions encountered will be copied
by a new <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a>. The latter, instead of copying the
<a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a>, it’ll replace the <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> with copies of
the class it refers to.</p>
<p>Functions can be manually copied with <a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_state()</span></code></a> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.set_state()</span></code>.</p>
</div>
<div class="section" id="customizing-function-in-the-gui">
<h2>Customizing function in the GUI<a class="headerlink" href="#customizing-function-in-the-gui" title="Permalink to this headline">¶</a></h2>
<p>Function properties are customizable in the GUI by the user according to the
values returned by <a class="reference internal" href="#ceed.function.FuncBase.get_gui_props" title="ceed.function.FuncBase.get_gui_props"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_gui_props()</span></code></a>,
<a class="reference internal" href="#ceed.function.FuncBase.get_prop_pretty_name" title="ceed.function.FuncBase.get_prop_pretty_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_prop_pretty_name()</span></code></a>, and <a class="reference internal" href="#ceed.function.FuncBase.get_gui_elements" title="ceed.function.FuncBase.get_gui_elements"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_gui_elements()</span></code></a>.</p>
<p>These methods control what properties are editable by the user and the values
they may potentially take.</p>
<dl class="exception">
<dt id="ceed.function.FuncDoneException">
<em class="property">exception </em><code class="sig-prename descclassname">ceed.function.</code><code class="sig-name descname">FuncDoneException</code><a class="headerlink" href="#ceed.function.FuncDoneException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Raised when the <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> is called with a time value after
its valid time interval.</p>
</dd></dl>

<dl class="class">
<dt id="ceed.function.FunctionFactoryBase">
<em class="property">class </em><code class="sig-prename descclassname">ceed.function.</code><code class="sig-name descname">FunctionFactoryBase</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FunctionFactoryBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">kivy._event.EventDispatcher</span></code></p>
<p>A global store of the defined <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> sub-classes and
customized function instances.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Events</dt>
<dd class="field-odd"><dl class="simple">
<dt>on_changed:</dt><dd><p>The event is triggered every time a function is added or removed
from the factory or if a class is registered.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.add_func">
<code class="sig-name descname">add_func</code><span class="sig-paren">(</span><em class="sig-param">func: ceed.function.FuncBase</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FunctionFactoryBase.add_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the function to <a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_user" title="ceed.function.FunctionFactoryBase.funcs_user"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_user</span></code></a> and <a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="ceed.function.FunctionFactoryBase.funcs_inst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_inst</span></code></a>,
which makes it available in the GUI.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details.</p>
<p>If the <a class="reference internal" href="#ceed.function.FuncBase.name" title="ceed.function.FuncBase.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.name</span></code></a> already exists in <a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="ceed.function.FunctionFactoryBase.funcs_inst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_inst</span></code></a>,
<a class="reference internal" href="#ceed.function.FuncBase.name" title="ceed.function.FuncBase.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.name</span></code></a> will be set to a unique name based on its
original name. Once added until removed, anytime the function’s
<a class="reference internal" href="#ceed.function.FuncBase.name" title="ceed.function.FuncBase.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.name</span></code></a> changes, if it clashes with an existing
function’s name, it is automatically renamed.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>func</cite>: a <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> derived instance.</dt><dd><p>The function to add.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.clear_added_funcs">
<code class="sig-name descname">clear_added_funcs</code><span class="sig-paren">(</span><em class="sig-param">force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FunctionFactoryBase.clear_added_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes all the functions registered with <a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_func()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>force</cite>: bool</dt><dd><p>If True, it’ll remove all functions even if there are
references to them created by <a class="reference internal" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="ceed.function.FunctionFactoryBase.get_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_func_ref()</span></code></a>.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FunctionFactoryBase.funcs_cls">
<code class="sig-name descname">funcs_cls</code><em class="property"> = {}</em><a class="headerlink" href="#ceed.function.FunctionFactoryBase.funcs_cls" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict whose keys is the name of the function classes registered
with <a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> and whose values is the corresponding classes.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">funcs_cls</span>
<span class="go">{&#39;FuncGroup&#39;: ceed.function.FuncGroup,</span>
<span class="go"> &#39;ConstFunc&#39;: ceed.function.plugin.ConstFunc,</span>
<span class="go"> &#39;LinearFunc&#39;: ceed.function.plugin.LinearFunc,</span>
<span class="go"> &#39;ExponentialFunc&#39;: ceed.function.plugin.ExponentialFunc,</span>
<span class="go"> &#39;CosFunc&#39;: ceed.function.plugin.CosFunc}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FunctionFactoryBase.funcs_inst">
<code class="sig-name descname">funcs_inst</code><a class="headerlink" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict whose keys is the function <code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code> and whose values is the
corresponding function instances.</p>
<p>Contains functions added with <a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_func()</span></code></a> as well as those
automatically created and added when <a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> is called on a class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">funcs_inst</span>
<span class="go">{&#39;Group&#39;: &lt;ceed.function.FuncGroup at 0x1da866f00b8&gt;,</span>
<span class="go"> &#39;Const&#39;: &lt;ceed.function.plugin.ConstFunc at 0x1da866f0978&gt;,</span>
<span class="go"> &#39;Linear&#39;: &lt;ceed.function.plugin.LinearFunc at 0x1da866f09e8&gt;,</span>
<span class="go"> &#39;Exp&#39;: &lt;ceed.function.plugin.ExponentialFunc at 0x1da866f0a58&gt;,</span>
<span class="go"> &#39;Cos&#39;: &lt;ceed.function.plugin.CosFunc at 0x1da866f0ac8&gt;,</span>
<span class="go"> &#39;line&#39;: &lt;ceed.function.plugin.LinearFunc at 0x1da866f0278&gt;,</span>
<span class="go"> &#39;line-2&#39;: &lt;ceed.function.plugin.LinearFunc at 0x1da866f0e48&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FunctionFactoryBase.funcs_inst_default">
<code class="sig-name descname">funcs_inst_default</code><em class="property"> = {}</em><a class="headerlink" href="#ceed.function.FunctionFactoryBase.funcs_inst_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict whose keys is the function <code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code> and whose values are the
corresponding function instances.</p>
<p>Contains only the functions that are automatically created and added when
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> is called on a class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function_factory</span><span class="o">.</span><span class="n">funcs_inst_default</span>
<span class="go">{&#39;Group&#39;: &lt;ceed.function.FuncGroup at 0x1da866f00b8&gt;,</span>
<span class="go"> &#39;Const&#39;: &lt;ceed.function.plugin.ConstFunc at 0x1da866f0978&gt;,</span>
<span class="go"> &#39;Linear&#39;: &lt;ceed.function.plugin.LinearFunc at 0x1da866f09e8&gt;,</span>
<span class="go"> &#39;Exp&#39;: &lt;ceed.function.plugin.ExponentialFunc at 0x1da866f0a58&gt;,</span>
<span class="go"> &#39;Cos&#39;: &lt;ceed.function.plugin.CosFunc at 0x1da866f0ac8&gt;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FunctionFactoryBase.funcs_user">
<code class="sig-name descname">funcs_user</code><em class="property"> = []</em><a class="headerlink" href="#ceed.function.FunctionFactoryBase.funcs_user" title="Permalink to this definition">¶</a></dt>
<dd><p>List of the function instances registered with <a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_func()</span></code></a>.</p>
<p>It does not include the instances automatically created and stored in
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst_default" title="ceed.function.FunctionFactoryBase.funcs_inst_default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_inst_default</span></code></a> when a function class is <a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">name: str</em><span class="sig-paren">)</span> &#x2192; Optional[Type[ceed.function.FuncBase]]<a class="headerlink" href="#ceed.function.FunctionFactoryBase.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the class with name <code class="docutils literal notranslate"><span class="pre">name</span></code> that was registered with
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a>.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>name</cite>: str</dt><dd><p>The name of the class (e.g. <code class="docutils literal notranslate"><span class="pre">'ExpFunc'</span></code>).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The class if found, otherwise None.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.get_classes">
<code class="sig-name descname">get_classes</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List[Type[ceed.function.FuncBase]]<a class="headerlink" href="#ceed.function.FunctionFactoryBase.get_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the classes registered with <a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.get_func_ref">
<code class="sig-name descname">get_func_ref</code><span class="sig-paren">(</span><em class="sig-param">name: str = None</em>, <em class="sig-param">func: Optional[ceed.function.FuncBase] = None</em><span class="sig-paren">)</span> &#x2192; ceed.function.CeedFuncRef<a class="headerlink" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> instance that refers to the
original function. See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details.</p>
<p>One of <code class="docutils literal notranslate"><span class="pre">name</span></code> or <code class="docutils literal notranslate"><span class="pre">func</span></code> must be specified. The function being
referenced by <code class="docutils literal notranslate"><span class="pre">func</span></code> should have been registered with this class,
although it is not explicitly enforced currently.</p>
<p>If used, <a class="reference internal" href="#ceed.function.FunctionFactoryBase.return_func_ref" title="ceed.function.FunctionFactoryBase.return_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">return_func_ref()</span></code></a> must be called when the reference
is not used anymore.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the function to lookup in <a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="ceed.function.FunctionFactoryBase.funcs_inst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_inst</span></code></a>.</p></li>
<li><p><strong>func</strong> – Or the actual function to use.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> to the original function.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.get_names">
<code class="sig-name descname">get_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List[str]<a class="headerlink" href="#ceed.function.FunctionFactoryBase.get_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the class names of all classes registered with
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.register" title="ceed.function.FunctionFactoryBase.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.make_func">
<code class="sig-name descname">make_func</code><span class="sig-paren">(</span><em class="sig-param">state: dict</em>, <em class="sig-param">instance: Optional[ceed.function.FuncBase] = None</em>, <em class="sig-param">clone: bool = False</em><span class="sig-paren">)</span> &#x2192; ceed.function.FuncBase<a class="headerlink" href="#ceed.function.FunctionFactoryBase.make_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates the function from the state and returns it.</p>
<p>This method must be used to instantiate a function from state.
See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details and an example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>state</strong> – The state dict representing the function as returned by
<a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_state()</span></code></a>.</p></li>
<li><p><strong>instance</strong> – If None, a function instance of the type specified
in <code class="docutils literal notranslate"><span class="pre">state</span></code> will be created and state will applied to it.
Otherwise, it is applied to the given instance, which must be of
the correct class.</p></li>
<li><p><strong>clone</strong> – If False, only user customizable properties of the
function will be set, otherwise, all properties from state are
applied to the function. Clone is meant to be an complete
re-instantiation of the function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The function instance created.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FunctionFactoryBase.param_noise_factory">
<code class="sig-name descname">param_noise_factory</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.FunctionFactoryBase.param_noise_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>An automatically created instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.param_noise.ParameterNoiseFactory</span></code> that is used to
register and get noise classes for use with functions.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.recover_funcs">
<code class="sig-name descname">recover_funcs</code><span class="sig-paren">(</span><em class="sig-param">function_states: List[dict]</em><span class="sig-paren">)</span> &#x2192; Tuple[List[ceed.function.FuncBase], Dict[str, str]]<a class="headerlink" href="#ceed.function.FunctionFactoryBase.recover_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of function states such as returned by
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.save_functions" title="ceed.function.FunctionFactoryBase.save_functions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">save_functions()</span></code></a> and instantiates the functions represented by
the states and adds (<a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_func()</span></code></a>) the functions to the factory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function_states</strong> – List of function states.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple <code class="docutils literal notranslate"><span class="pre">funcs,</span> <span class="pre">name_map</span></code>, <code class="docutils literal notranslate"><span class="pre">funcs</span></code> is the list of
functions, <code class="docutils literal notranslate"><span class="pre">name_map</span></code> is a map from the original function’s name
to the new name given to the function (in case a function with that
name already existed).</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param">cls: Type[FuncBase], instance: Optional[ceed.function.FuncBase] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FunctionFactoryBase.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers the class and adds it to <a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_cls" title="ceed.function.FunctionFactoryBase.funcs_cls"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_cls</span></code></a>. It also
creates an instance (unless <code class="docutils literal notranslate"><span class="pre">instance</span></code> is provided, in which case
that is used) of the class that is added to <a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst" title="ceed.function.FunctionFactoryBase.funcs_inst"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_inst</span></code></a> and
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.funcs_inst_default" title="ceed.function.FunctionFactoryBase.funcs_inst_default"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs_inst_default</span></code></a>.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>cls</cite>: subclass of <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a></dt><dd><p>The class to register.</p>
</dd>
<dt><cite>instance</cite>: instance of <cite>cls</cite></dt><dd><p>The instance of <cite>cls</cite> to use. If None, a default
class instance, using the default <a class="reference internal" href="#ceed.function.FuncBase.name" title="ceed.function.FuncBase.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.name</span></code></a> is
stored. Defaults to None.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.remove_func">
<code class="sig-name descname">remove_func</code><span class="sig-paren">(</span><em class="sig-param">func: ceed.function.CeedFunc</em>, <em class="sig-param">force: bool = False</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#ceed.function.FunctionFactoryBase.remove_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a function previously added with <a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_func()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>func</cite>: a <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> derived instance.</dt><dd><p>The function to remove.</p>
</dd>
<dt><cite>force</cite>: bool</dt><dd><p>If True, it’ll remove the function even if there are references
to it created by <a class="reference internal" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="ceed.function.FunctionFactoryBase.get_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_func_ref()</span></code></a>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether the function was removed successfully. E.g. if
force is False and it has a ref, it won’t be removed.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.return_func_ref">
<code class="sig-name descname">return_func_ref</code><span class="sig-paren">(</span><em class="sig-param">func_ref: ceed.function.CeedFuncRef</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FunctionFactoryBase.return_func_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases the function ref created by <a class="reference internal" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="ceed.function.FunctionFactoryBase.get_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_func_ref()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func_ref</strong> – Instance returned by <a class="reference internal" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="ceed.function.FunctionFactoryBase.get_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_func_ref()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FunctionFactoryBase.save_functions">
<code class="sig-name descname">save_functions</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List[dict]<a class="headerlink" href="#ceed.function.FunctionFactoryBase.save_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict representation of all the functions added with
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_func()</span></code></a>.</p>
<p>It is a list of dicts where each item is the
<a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.get_state()</span></code></a> of the corresponding function in
<code class="xref py py-attr docutils literal notranslate"><span class="pre">user_funcs</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ceed.function.FuncBase">
<em class="property">class </em><code class="sig-prename descclassname">ceed.function.</code><code class="sig-name descname">FuncBase</code><span class="sig-paren">(</span><em class="sig-param">function_factory</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">kivy._event.EventDispatcher</span></code></p>
<p>The base class for all functions.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details.</p>
<p>When writing a plugin with new functions, you probably want to inherit
from <a class="reference internal" href="#ceed.function.CeedFunc" title="ceed.function.CeedFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFunc</span></code></a> because it provides some convenience methods
(calling the function will check if it’s in the valid domain). See e.g.
<a class="reference internal" href="function_plugin.html#ceed.function.plugin.LinearFunc" title="ceed.function.plugin.LinearFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.plugin.LinearFunc</span></code></a> for an example.</p>
<dl class="field-list simple">
<dt class="field-odd">Events</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>on_changed</cite>:</dt><dd><p>Triggered whenever a configurable property (i.e. it is returned as
key in the <a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a> dict) of this instance is changed.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="ceed.function.FuncBase.apply_state">
<code class="sig-name descname">apply_state</code><span class="sig-paren">(</span><em class="sig-param">state: Dict</em>, <em class="sig-param">clone=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.apply_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the state of the function saved with <a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a> and
applies it to this function. it also creates any children function e.g.
in the case it is a <a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a> etc.</p>
<p>It is called internally and should not be used directly. Use
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.make_func" title="ceed.function.FunctionFactoryBase.make_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.make_func()</span></code></a> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>state</cite>: dict</dt><dd><p>The dict to use to reconstruct the function as returned by
<a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a>.</p>
</dd>
<dt><cite>clone</cite>: bool</dt><dd><p>If True will apply all the state exactly as in the original
function, otherwise it doesn’t apply internal parameters
listed in <code class="xref py py-attr docutils literal notranslate"><span class="pre">_clone_props</span></code> that are not user customizable.</p>
</dd>
</dl>
</dd>
</dl>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for an example.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.can_other_func_be_added">
<code class="sig-name descname">can_other_func_be_added</code><span class="sig-paren">(</span><em class="sig-param">other_func</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#ceed.function.FuncBase.can_other_func_be_added" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks whether the other function may be added to this function.</p>
<p>Specifically, it checks whether this function is a child of the other
function, and if so we shouldn’t allow the other function to be added
to this function as it’ll create a circular tree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other_func</strong> – Another <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether it is safe to add the other function as a child of
this function.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.copy_expand_ref">
<code class="sig-name descname">copy_expand_ref</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.copy_expand_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Copies this function and all its sub-functions.</p>
<p>If any of them are <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> instances, they are replaced
with a copy of their original function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A copy of this function, with all <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a>
instances replaced by their original normal function.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#ceed.function.FuncBase.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A description of the function. This is shown to the user and should
describe the function.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.display">
<code class="sig-name descname">display</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.FuncBase.display" title="Permalink to this definition">¶</a></dt>
<dd><p>The widget that visualize this function, if any.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.duration">
<code class="sig-name descname">duration</code><a class="headerlink" href="#ceed.function.FuncBase.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>How long after the start of the function until the function is complete
and continues to the next <a class="reference internal" href="#ceed.function.FuncBase.loop" title="ceed.function.FuncBase.loop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop</span></code></a> or is done.</p>
<p>-1 means go on forever and it never finishes (except if manually finished).
This could be used e.g. if waiting for some external interrupt - set
duration to -1, and only finish when the interrupt happens.</p>
<p>For <a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a> this is automatically computed as the sum of all the
sub-function duration. If any of them are negative, this will also be
negative.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for more details.</p>
<p>The value is in <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_timebase()</span></code></a> units.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.duration_min">
<code class="sig-name descname">duration_min</code><a class="headerlink" href="#ceed.function.FuncBase.duration_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">duration</span></code></a>, except it excludes any infinite portions of
the function duration.</p>
<p>I.e. any sub function whose duration is negative will be read as zero. This
gives the estimated minimum duration not including any infinite portions
of a single loop iteration.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for more details.</p>
<p>The value is in <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_timebase()</span></code></a> units and is read only.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.duration_min_total">
<code class="sig-name descname">duration_min_total</code><a class="headerlink" href="#ceed.function.FuncBase.duration_min_total" title="Permalink to this definition">¶</a></dt>
<dd><p>The total duration of the function including all the loops, excluding
any infinite portions of the function duration.</p>
<p>Similar to <a class="reference internal" href="#ceed.function.FuncBase.duration_min" title="ceed.function.FuncBase.duration_min"><code class="xref py py-attr docutils literal notranslate"><span class="pre">duration_min</span></code></a>, except it includes all the loops. So e.g.
if <a class="reference internal" href="#ceed.function.FuncBase.duration_min" title="ceed.function.FuncBase.duration_min"><code class="xref py py-attr docutils literal notranslate"><span class="pre">duration_min</span></code></a> is <code class="docutils literal notranslate"><span class="pre">5</span></code> and <a class="reference internal" href="#ceed.function.FuncBase.loop" title="ceed.function.FuncBase.loop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop</span></code></a> is <code class="docutils literal notranslate"><span class="pre">2</span></code>,
<a class="reference internal" href="#ceed.function.FuncBase.duration_min_total" title="ceed.function.FuncBase.duration_min_total"><code class="xref py py-attr docutils literal notranslate"><span class="pre">duration_min_total</span></code></a> would typically be <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for more details.</p>
<p>The value is in <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_timebase()</span></code></a> units and is read only.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.function_factory">
<code class="sig-name descname">function_factory</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.FuncBase.function_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> instance with which this function is
associated. This should be set by whoever creates the function by passing
it to the constructor.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_domain">
<code class="sig-name descname">get_domain</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.get_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current domain of the function.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for details.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_funcs">
<code class="sig-name descname">get_funcs</code><span class="sig-paren">(</span><em class="sig-param">step_into_ref=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.get_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator that yields the function and all its children functions
if it has any, e.g. for <a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a>. It’s in DFS order.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>step_into_ref</cite>: bool</dt><dd><p>If True, when it encounters a <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> instance
it’ll step into it and return that function and its children.
Otherwise, it’ll just return the <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> and not
step into it.</p>
</dd>
</dl>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Group</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;FuncGroup&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Group</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">cos</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cos</span><span class="o">.</span><span class="n">get_funcs</span><span class="p">()]</span>
<span class="go">[&lt;ceed.function.plugin.CosFunc at 0x4d71c78&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_funcs</span><span class="p">()]</span>
<span class="go">[&lt;ceed.function.FuncGroup at 0x4f85800&gt;,</span>
<span class="go"> &lt;ceed.function.plugin.CosFunc at 0x4d71c78&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_gui_elements">
<code class="sig-name descname">get_gui_elements</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.get_gui_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns widget instances that should be displayed to the user along
with this function’s editable properties of <a class="reference internal" href="#ceed.function.FuncBase.get_gui_props" title="ceed.function.FuncBase.get_gui_props"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_gui_props()</span></code></a>.</p>
<p>These widgets are displayed along with other config
parameters for the function and can be used for custom config options.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list that contains all Kivy widget instances to be displayed.</p>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span><span class="o">.</span><span class="n">get_gui_elements</span><span class="p">()</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_gui_props">
<code class="sig-name descname">get_gui_props</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.get_gui_props" title="Permalink to this definition">¶</a></dt>
<dd><p>Called internally by the GUI to get the properties of the function
that should be displayed to the user to be customized.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A dict that contains all properties that should be displayed. The
values of the property is as follows:</p>
<ul>
<li><p>If it’s the string int, float, str or it’s the python type
int, float, or str then the GUI will show a editable property
for this type.</p></li>
<li><p>If it’s None, we look at the value of the property
in the instance and display accordingly (e.g. if it’s a str type
property, a string property is displayed to the user).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default value determines the type. So if the default value
is <code class="docutils literal notranslate"><span class="pre">0</span></code>, the type will be int and a user won’t be able to
enter a float. Use e.g. <code class="docutils literal notranslate"><span class="pre">0.0</span></code> in the latter case.</p>
</div>
</li>
</ul>
</p>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span><span class="o">.</span><span class="n">get_gui_props</span><span class="p">()</span>
<span class="go">{&#39;A&#39;: None,</span>
<span class="go"> &#39;duration&#39;: None,</span>
<span class="go"> &#39;f&#39;: None,</span>
<span class="go"> &#39;loop&#39;: None,</span>
<span class="go"> &#39;name&#39;: None,</span>
<span class="go"> &#39;t_offset&#39;: None,</span>
<span class="go"> &#39;th0&#39;: None}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_noise_supported_parameters">
<code class="sig-name descname">get_noise_supported_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; set<a class="headerlink" href="#ceed.function.FuncBase.get_noise_supported_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the set of property names of this function that supports
randomness and may have an
<code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.param_noise.NoiseBase</span></code> instance associated with
it.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_prop_pretty_name">
<code class="sig-name descname">get_prop_pretty_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.get_prop_pretty_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Called internally by the GUI to get a translation dictionary which
converts property names as used in <a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a> into nicer
property names used to display the properties to the user for
customization. E.g. “timebase_numerator” may be displayed as
“TB num” as that is more concise.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict that contains all properties whose names should be changed
when displayed. Keys in the dict are the names as returned by
<a class="reference internal" href="#ceed.function.FuncBase.get_state" title="ceed.function.FuncBase.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a>, the values are the names that should be
displayed instead. If a property is not included it’s
original property name is used instead.</p>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">LinearFunc</span><span class="p">(</span><span class="n">function_factory</span><span class="o">=</span><span class="n">function_factory</span><span class="p">)</span>
<span class="go">{&#39;timebase_numerator&#39;: &#39;TB num&#39;, &#39;timebase_denominator&#39;: &#39;TB denom&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><em class="sig-param">recurse=True</em>, <em class="sig-param">expand_ref=False</em><span class="sig-paren">)</span> &#x2192; Dict<a class="headerlink" href="#ceed.function.FuncBase.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict representation of the function so that it can be
reconstructed later with <a class="reference internal" href="#ceed.function.FuncBase.apply_state" title="ceed.function.FuncBase.apply_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">apply_state()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>recurse</cite>: bool</dt><dd><p>When the function has children functions, e.g. a
<a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a>, if True all the children functions’
states will also be returned, otherwise, only this function’s
state is returned. See the example.</p>
</dd>
<dt><cite>expand_ref</cite>: bool</dt><dd><p>If True, if any sub-functions (or this function itself) are
<a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> instances, they will be expanded to
contain the state of the actual underlying function. Otherwise,
it is returned as being a function reference.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict with all the configuration data.</p>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span>
<span class="go">{&#39;A&#39;: 1.0,</span>
<span class="go"> &#39;cls&#39;: &#39;CosFunc&#39;,</span>
<span class="go"> &#39;duration&#39;: 0,</span>
<span class="go"> &#39;f&#39;: 1.0,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Cos&#39;,</span>
<span class="go"> &#39;t_offset&#39;: 0,</span>
<span class="go"> &#39;th0&#39;: 0.0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Group</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;FuncGroup&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Group</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span>
<span class="go">&lt;ceed.function.FuncGroup at 0x4f85800&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">cos</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">recurse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">{&#39;cls&#39;: &#39;FuncGroup&#39;,</span>
<span class="go"> &#39;funcs&#39;: [{&#39;A&#39;: 1.0,</span>
<span class="go">   &#39;cls&#39;: &#39;CosFunc&#39;,</span>
<span class="go">   &#39;duration&#39;: 0,</span>
<span class="go">   &#39;f&#39;: 1.0,</span>
<span class="go">   &#39;loop&#39;: 1,</span>
<span class="go">   &#39;name&#39;: &#39;Cos&#39;,</span>
<span class="go">   &#39;t_offset&#39;: 0,</span>
<span class="go">   &#39;th0&#39;: 0.0}],</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Group&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">recurse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">{&#39;cls&#39;: &#39;FuncGroup&#39;,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Group&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.get_timebase">
<code class="sig-name descname">get_timebase</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.get_timebase" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the function’s timebase.</p>
<p>If <a class="reference internal" href="#ceed.function.FuncBase.timebase_numerator" title="ceed.function.FuncBase.timebase_numerator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase_numerator</span></code></a> and <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a> is 0, it returns the
timebase of its <a class="reference internal" href="#ceed.function.FuncBase.parent_func" title="ceed.function.FuncBase.parent_func"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent_func</span></code></a> with <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_timebase()</span></code></a> if it has
a parent. If it doesn’t have a parent, it return 1.
Otherwise, it returns <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.has_ref">
<code class="sig-name descname">has_ref</code><a class="headerlink" href="#ceed.function.FuncBase.has_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether there’s a CeedFuncRef pointing to this function. If True,
the function should not be deleted from the function factory that holds it.</p>
<p>This is automatically set by <a class="reference internal" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="ceed.function.FunctionFactoryBase.get_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.get_func_ref()</span></code></a>
and <a class="reference internal" href="#ceed.function.FunctionFactoryBase.return_func_ref" title="ceed.function.FunctionFactoryBase.return_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.return_func_ref()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.icon">
<code class="sig-name descname">icon</code><a class="headerlink" href="#ceed.function.FuncBase.icon" title="Permalink to this definition">¶</a></dt>
<dd><p>The function icon. Not used currently.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.init_func">
<code class="sig-name descname">init_func</code><span class="sig-paren">(</span><em class="sig-param">t_start</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.init_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the function so it is ready to be called to get
the function values.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>t_start</cite>: float</dt><dd><p>The time in seconds in global time. <a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">t_start</span></code></a>
will be set to this value. All subsequent calls to the
function with a time value will be relative to this given time.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.init_loop_iteration">
<code class="sig-name descname">init_loop_iteration</code><span class="sig-paren">(</span><em class="sig-param">t_start</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.init_loop_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the function at the begining of each loop.</p>
<p>It’s called internally at the start of every <a class="reference internal" href="#ceed.function.FuncBase.loop" title="ceed.function.FuncBase.loop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop</span></code></a> iteration,
except the first.</p>
<p><a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">t_start</span></code></a> will be set to the given value, except if
<a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">duration</span></code></a> is not negative. Then <a class="reference internal" href="#ceed.function.FuncBase.t_start" title="ceed.function.FuncBase.t_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">t_start</span></code></a> will simply be
incremented by the <a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">duration</span></code></a> of the previous loop iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>t_start</cite>: float</dt><dd><p>The time in seconds in global time. All subsequent calls to the
function with a time value will be relative to this given time.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.loop">
<code class="sig-name descname">loop</code><a class="headerlink" href="#ceed.function.FuncBase.loop" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>The number of times the function loops through before it is considered</dt><dd><p>done.</p>
</dd>
</dl>
<p>At the end of each loop <a class="reference internal" href="#ceed.function.FuncBase.loop_count" title="ceed.function.FuncBase.loop_count"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop_count</span></code></a> is incremented until done,
starting from zero.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for more details.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.loop_count">
<code class="sig-name descname">loop_count</code><em class="property"> = 0</em><a class="headerlink" href="#ceed.function.FuncBase.loop_count" title="Permalink to this definition">¶</a></dt>
<dd><p>The current loop iteration.</p>
<p>See <a class="reference internal" href="#ceed.function.FuncBase.loop" title="ceed.function.FuncBase.loop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop</span></code></a> and <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#ceed.function.FuncBase.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the function instance. The name must be unique within a
<a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> once it is added
(<a class="reference internal" href="#ceed.function.FunctionFactoryBase.add_func" title="ceed.function.FunctionFactoryBase.add_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.add_func()</span></code></a>) to the
<a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a>, otherwise it’s automatically renamed.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.noisy_parameters">
<code class="sig-name descname">noisy_parameters</code><a class="headerlink" href="#ceed.function.FuncBase.noisy_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict mapping parameter names of the function to
<code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.param_noise.NoiseBase</span></code> instances that indicate
how the parameter should be sampled, when the parameter needs to be
stochastic.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.parent_func">
<code class="sig-name descname">parent_func</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.FuncBase.parent_func" title="Permalink to this definition">¶</a></dt>
<dd><p>If this function is the child of another function, e.g. it’s a
sub-function of a <a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a> instance, then <a class="reference internal" href="#ceed.function.FuncBase.parent_func" title="ceed.function.FuncBase.parent_func"><code class="xref py py-attr docutils literal notranslate"><span class="pre">parent_func</span></code></a>
points to the parent function.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.resample_parameters">
<code class="sig-name descname">resample_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.resample_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Resamples all the function parameters that have randomness
attached to it in <a class="reference internal" href="#ceed.function.FuncBase.noisy_parameters" title="ceed.function.FuncBase.noisy_parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">noisy_parameters</span></code></a>.</p>
<p>These function properties will be set to newly sampled values.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.t_start">
<code class="sig-name descname">t_start</code><em class="property"> = 0</em><a class="headerlink" href="#ceed.function.FuncBase.t_start" title="Permalink to this definition">¶</a></dt>
<dd><p>The time offset subtracted from the time passed to the function.</p>
<p>The value is in seconds. See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for more details.</p>
<p>Don’t set directly, it is set with <a class="reference internal" href="#ceed.function.FuncBase.init_func" title="ceed.function.FuncBase.init_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_func()</span></code></a> and
<a class="reference internal" href="#ceed.function.FuncBase.init_loop_iteration" title="ceed.function.FuncBase.init_loop_iteration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">init_loop_iteration()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncBase.tick_loop">
<code class="sig-name descname">tick_loop</code><span class="sig-paren">(</span><em class="sig-param">t</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncBase.tick_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Increments <a class="reference internal" href="#ceed.function.FuncBase.loop_count" title="ceed.function.FuncBase.loop_count"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop_count</span></code></a> and returns whether the function is
done, which is when all the <a class="reference internal" href="#ceed.function.FuncBase.loop" title="ceed.function.FuncBase.loop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop</span></code></a> iterations are done and
<a class="reference internal" href="#ceed.function.FuncBase.loop_count" title="ceed.function.FuncBase.loop_count"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop_count</span></code></a> reached <a class="reference internal" href="#ceed.function.FuncBase.loop" title="ceed.function.FuncBase.loop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">loop</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">t</span></code> is in seconds and this is only called
when the function time reached the end of its valid domain so that it
makes sense to increment the loop. I.e. if the user called the function
with a time past the current loop duration, this is called internally
to increment the loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> – The time with which the function was called.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if it ticked the loop, otherwise False if we cannot tick
because we hit the max.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.timebase">
<code class="sig-name descname">timebase</code><a class="headerlink" href="#ceed.function.FuncBase.timebase" title="Permalink to this definition">¶</a></dt>
<dd><p>The (read-only) timebase scale factor as computed by
<a class="reference internal" href="#ceed.function.FuncBase.timebase_numerator" title="ceed.function.FuncBase.timebase_numerator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase_numerator</span></code></a> <code class="docutils literal notranslate"><span class="pre">/</span></code> <a class="reference internal" href="#ceed.function.FuncBase.timebase_denominator" title="ceed.function.FuncBase.timebase_denominator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase_denominator</span></code></a>. It returns
either a float, or a Fraction instance when the numerator and
denominator are ints.</p>
<p>To set, <a class="reference internal" href="#ceed.function.FuncBase.timebase_numerator" title="ceed.function.FuncBase.timebase_numerator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase_numerator</span></code></a> and <a class="reference internal" href="#ceed.function.FuncBase.timebase_denominator" title="ceed.function.FuncBase.timebase_denominator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase_denominator</span></code></a> must
be set individually. To use, call <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_timebase()</span></code></a>, rather than
using <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a> directly.</p>
<p>The timebase is the scaling factor by which some function properties that
relate to time, e.g. <a class="reference internal" href="#ceed.function.FuncBase.duration" title="ceed.function.FuncBase.duration"><code class="xref py py-attr docutils literal notranslate"><span class="pre">duration</span></code></a>, are multiplied to convert from
timebase units to time.</p>
<p>By default <a class="reference internal" href="#ceed.function.FuncBase.timebase_numerator" title="ceed.function.FuncBase.timebase_numerator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase_numerator</span></code></a> is 0 and
<a class="reference internal" href="#ceed.function.FuncBase.timebase_denominator" title="ceed.function.FuncBase.timebase_denominator"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase_denominator</span></code></a> is 1 which makes <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a> 0
indicating that the timebase used is given by the parent function or is 1.
When <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a> is not 0 this <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a> is used instead.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> and <a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_timebase()</span></code></a> for more details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This property is dispatched whenever the value returned by
<a class="reference internal" href="#ceed.function.FuncBase.get_timebase" title="ceed.function.FuncBase.get_timebase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_timebase()</span></code></a> would change, even if <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a> didn’t
change. E.g. when a parent’s timebase changes.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.timebase_denominator">
<code class="sig-name descname">timebase_denominator</code><a class="headerlink" href="#ceed.function.FuncBase.timebase_denominator" title="Permalink to this definition">¶</a></dt>
<dd><p>The denominator of the timebase. See <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncBase.timebase_numerator">
<code class="sig-name descname">timebase_numerator</code><a class="headerlink" href="#ceed.function.FuncBase.timebase_numerator" title="Permalink to this definition">¶</a></dt>
<dd><p>The numerator of the timebase. See <a class="reference internal" href="#ceed.function.FuncBase.timebase" title="ceed.function.FuncBase.timebase"><code class="xref py py-attr docutils literal notranslate"><span class="pre">timebase</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ceed.function.CeedFunc">
<em class="property">class </em><code class="sig-prename descclassname">ceed.function.</code><code class="sig-name descname">CeedFunc</code><span class="sig-paren">(</span><em class="sig-param">function_factory</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.CeedFunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.FuncBase</span></code></a></p>
<p>A base class for typical Ceed functions.</p>
<p>See <a class="reference internal" href="function_plugin.html#module-ceed.function.plugin" title="ceed.function.plugin"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function.plugin</span></code></a> for example functions that are based on
this class.</p>
<dl class="method">
<dt id="ceed.function.CeedFunc.get_gui_props">
<code class="sig-name descname">get_gui_props</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.CeedFunc.get_gui_props" title="Permalink to this definition">¶</a></dt>
<dd><p>Called internally by the GUI to get the properties of the function
that should be displayed to the user to be customized.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A dict that contains all properties that should be displayed. The
values of the property is as follows:</p>
<ul>
<li><p>If it’s the string int, float, str or it’s the python type
int, float, or str then the GUI will show a editable property
for this type.</p></li>
<li><p>If it’s None, we look at the value of the property
in the instance and display accordingly (e.g. if it’s a str type
property, a string property is displayed to the user).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The default value determines the type. So if the default value
is <code class="docutils literal notranslate"><span class="pre">0</span></code>, the type will be int and a user won’t be able to
enter a float. Use e.g. <code class="docutils literal notranslate"><span class="pre">0.0</span></code> in the latter case.</p>
</div>
</li>
</ul>
</p>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span><span class="o">.</span><span class="n">get_gui_props</span><span class="p">()</span>
<span class="go">{&#39;A&#39;: None,</span>
<span class="go"> &#39;duration&#39;: None,</span>
<span class="go"> &#39;f&#39;: None,</span>
<span class="go"> &#39;loop&#39;: None,</span>
<span class="go"> &#39;name&#39;: None,</span>
<span class="go"> &#39;t_offset&#39;: None,</span>
<span class="go"> &#39;th0&#39;: None}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.CeedFunc.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><em class="sig-param">recurse=True</em>, <em class="sig-param">expand_ref=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.CeedFunc.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict representation of the function so that it can be
reconstructed later with <code class="xref py py-meth docutils literal notranslate"><span class="pre">apply_state()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>recurse</cite>: bool</dt><dd><p>When the function has children functions, e.g. a
<a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a>, if True all the children functions’
states will also be returned, otherwise, only this function’s
state is returned. See the example.</p>
</dd>
<dt><cite>expand_ref</cite>: bool</dt><dd><p>If True, if any sub-functions (or this function itself) are
<a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> instances, they will be expanded to
contain the state of the actual underlying function. Otherwise,
it is returned as being a function reference.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict with all the configuration data.</p>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span>
<span class="go">{&#39;A&#39;: 1.0,</span>
<span class="go"> &#39;cls&#39;: &#39;CosFunc&#39;,</span>
<span class="go"> &#39;duration&#39;: 0,</span>
<span class="go"> &#39;f&#39;: 1.0,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Cos&#39;,</span>
<span class="go"> &#39;t_offset&#39;: 0,</span>
<span class="go"> &#39;th0&#39;: 0.0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Group</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;FuncGroup&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Group</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span>
<span class="go">&lt;ceed.function.FuncGroup at 0x4f85800&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">cos</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">recurse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">{&#39;cls&#39;: &#39;FuncGroup&#39;,</span>
<span class="go"> &#39;funcs&#39;: [{&#39;A&#39;: 1.0,</span>
<span class="go">   &#39;cls&#39;: &#39;CosFunc&#39;,</span>
<span class="go">   &#39;duration&#39;: 0,</span>
<span class="go">   &#39;f&#39;: 1.0,</span>
<span class="go">   &#39;loop&#39;: 1,</span>
<span class="go">   &#39;name&#39;: &#39;Cos&#39;,</span>
<span class="go">   &#39;t_offset&#39;: 0,</span>
<span class="go">   &#39;th0&#39;: 0.0}],</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Group&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">recurse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">{&#39;cls&#39;: &#39;FuncGroup&#39;,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Group&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.CeedFunc.is_loop_done">
<code class="sig-name descname">is_loop_done</code><span class="sig-paren">(</span><em class="sig-param">t</em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#ceed.function.CeedFunc.is_loop_done" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the time <code class="docutils literal notranslate"><span class="pre">t</span></code> is after the end of the current
loop iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> – Time in seconds in global time.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether it’s past the end of the current loop iteration.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.CeedFunc.t_offset">
<code class="sig-name descname">t_offset</code><a class="headerlink" href="#ceed.function.CeedFunc.t_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>The amount of time in seconds to add the function time when computing
the result. It allows some additional control over the function.</p>
<p>All functions that inherit from this class must add this time. E.g. the
<a class="reference internal" href="function_plugin.html#ceed.function.plugin.LinearFunc" title="ceed.function.plugin.LinearFunc"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinearFunc</span></code></a> defines its function as
<code class="docutils literal notranslate"><span class="pre">y(t)</span> <span class="pre">=</span> <span class="pre">mt</span> <span class="pre">+</span> <span class="pre">b</span></code> with time <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">(t_in</span> <span class="pre">-</span> <span class="pre">t_start</span> <span class="pre">+</span> <span class="pre">t_offset)</span></code>.</p>
<p>The <code class="xref py py-attr docutils literal notranslate"><span class="pre">duration</span></code> of the function is not affected by this property as
it is independent of this. I.e. we check whether a time value is in the
function’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_domain()</span></code> ignoring <a class="reference internal" href="#ceed.function.CeedFunc.t_offset" title="ceed.function.CeedFunc.t_offset"><code class="xref py py-attr docutils literal notranslate"><span class="pre">t_offset</span></code></a> but we then
add it to the given time before computing the function’s output.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ceed.function.FuncGroup">
<em class="property">class </em><code class="sig-prename descclassname">ceed.function.</code><code class="sig-name descname">FuncGroup</code><span class="sig-paren">(</span><em class="sig-param">name='Group'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ceed.function.FuncBase</span></code></a></p>
<p>Function that represents a sequence of sub-functions.</p>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for more details.</p>
<p>When the function instance is called it goes through all its sub-functions
sequentially until they are done. E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Group</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;FuncGroup&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Const</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ConstFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Group</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">Const</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">Const</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">Const</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">init_func</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go"> Traceback (most recent call last):</span>
<span class="go">     g(10)</span>
<span class="go">   File &quot;g:\python\libs\ceed\ceed\function\__init__.py&quot;, line 934, in __call__</span>
<span class="go">     raise FuncDoneException</span>
<span class="go"> FuncDoneException</span>
</pre></div>
</div>
<dl class="method">
<dt id="ceed.function.FuncGroup.add_func">
<code class="sig-name descname">add_func</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">after=None</em>, <em class="sig-param">index=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup.add_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds <code class="docutils literal notranslate"><span class="pre">func</span></code> to this function as a sub-function in <a class="reference internal" href="#ceed.function.FuncGroup.funcs" title="ceed.function.FuncGroup.funcs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs</span></code></a>.</p>
<p>If calling this manually, remember to check
<a class="reference internal" href="#ceed.function.FuncBase.can_other_func_be_added" title="ceed.function.FuncBase.can_other_func_be_added"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FuncBase.can_other_func_be_added()</span></code></a> before adding if there’s
potential for it to return False.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>func</cite>: <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a></dt><dd><p>The function instance to add.</p>
</dd>
<dt><cite>after</cite>: <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a>, defaults to None.</dt><dd><p>The function in <a class="reference internal" href="#ceed.function.FuncGroup.funcs" title="ceed.function.FuncGroup.funcs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs</span></code></a> after which to add this function
if specified.</p>
</dd>
<dt><cite>index</cite>: int, defaults to None.</dt><dd><p>The index where to insert the function if specified.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncGroup.apply_state">
<code class="sig-name descname">apply_state</code><span class="sig-paren">(</span><em class="sig-param">state={}</em>, <em class="sig-param">clone=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup.apply_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the state of the function saved with <a class="reference internal" href="#ceed.function.FuncGroup.get_state" title="ceed.function.FuncGroup.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a> and
applies it to this function. it also creates any children function e.g.
in the case it is a <a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a> etc.</p>
<p>It is called internally and should not be used directly. Use
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.make_func" title="ceed.function.FunctionFactoryBase.make_func"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.make_func()</span></code></a> instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>state</cite>: dict</dt><dd><p>The dict to use to reconstruct the function as returned by
<a class="reference internal" href="#ceed.function.FuncGroup.get_state" title="ceed.function.FuncGroup.get_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_state()</span></code></a>.</p>
</dd>
<dt><cite>clone</cite>: bool</dt><dd><p>If True will apply all the state exactly as in the original
function, otherwise it doesn’t apply internal parameters
listed in <code class="xref py py-attr docutils literal notranslate"><span class="pre">_clone_props</span></code> that are not user customizable.</p>
</dd>
</dl>
</dd>
</dl>
<p>See <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for an example.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.FuncGroup.funcs">
<code class="sig-name descname">funcs</code><em class="property"> = []</em><a class="headerlink" href="#ceed.function.FuncGroup.funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of children functions of this function.</p>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncGroup.get_funcs">
<code class="sig-name descname">get_funcs</code><span class="sig-paren">(</span><em class="sig-param">step_into_ref=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup.get_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator that yields the function and all its children functions
if it has any, e.g. for <a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a>. It’s in DFS order.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>step_into_ref</cite>: bool</dt><dd><p>If True, when it encounters a <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> instance
it’ll step into it and return that function and its children.
Otherwise, it’ll just return the <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> and not
step into it.</p>
</dd>
</dl>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Group</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;FuncGroup&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Group</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">cos</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cos</span><span class="o">.</span><span class="n">get_funcs</span><span class="p">()]</span>
<span class="go">[&lt;ceed.function.plugin.CosFunc at 0x4d71c78&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">get_funcs</span><span class="p">()]</span>
<span class="go">[&lt;ceed.function.FuncGroup at 0x4f85800&gt;,</span>
<span class="go"> &lt;ceed.function.plugin.CosFunc at 0x4d71c78&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncGroup.get_state">
<code class="sig-name descname">get_state</code><span class="sig-paren">(</span><em class="sig-param">recurse=True</em>, <em class="sig-param">expand_ref=False</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict representation of the function so that it can be
reconstructed later with <a class="reference internal" href="#ceed.function.FuncGroup.apply_state" title="ceed.function.FuncGroup.apply_state"><code class="xref py py-meth docutils literal notranslate"><span class="pre">apply_state()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>recurse</cite>: bool</dt><dd><p>When the function has children functions, e.g. a
<a class="reference internal" href="#ceed.function.FuncGroup" title="ceed.function.FuncGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncGroup</span></code></a>, if True all the children functions’
states will also be returned, otherwise, only this function’s
state is returned. See the example.</p>
</dd>
<dt><cite>expand_ref</cite>: bool</dt><dd><p>If True, if any sub-functions (or this function itself) are
<a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> instances, they will be expanded to
contain the state of the actual underlying function. Otherwise,
it is returned as being a function reference.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict with all the configuration data.</p>
</dd>
</dl>
<p>E.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Cos</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CosFunc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span> <span class="o">=</span> <span class="n">Cos</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cos</span><span class="o">.</span><span class="n">get_state</span><span class="p">()</span>
<span class="go">{&#39;A&#39;: 1.0,</span>
<span class="go"> &#39;cls&#39;: &#39;CosFunc&#39;,</span>
<span class="go"> &#39;duration&#39;: 0,</span>
<span class="go"> &#39;f&#39;: 1.0,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Cos&#39;,</span>
<span class="go"> &#39;t_offset&#39;: 0,</span>
<span class="go"> &#39;th0&#39;: 0.0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Group</span> <span class="o">=</span> <span class="n">function_factory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;FuncGroup&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Group</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span>
<span class="go">&lt;ceed.function.FuncGroup at 0x4f85800&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">add_func</span><span class="p">(</span><span class="n">cos</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">recurse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">{&#39;cls&#39;: &#39;FuncGroup&#39;,</span>
<span class="go"> &#39;funcs&#39;: [{&#39;A&#39;: 1.0,</span>
<span class="go">   &#39;cls&#39;: &#39;CosFunc&#39;,</span>
<span class="go">   &#39;duration&#39;: 0,</span>
<span class="go">   &#39;f&#39;: 1.0,</span>
<span class="go">   &#39;loop&#39;: 1,</span>
<span class="go">   &#39;name&#39;: &#39;Cos&#39;,</span>
<span class="go">   &#39;t_offset&#39;: 0,</span>
<span class="go">   &#39;th0&#39;: 0.0}],</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Group&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">recurse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">{&#39;cls&#39;: &#39;FuncGroup&#39;,</span>
<span class="go"> &#39;loop&#39;: 1,</span>
<span class="go"> &#39;name&#39;: &#39;Group&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncGroup.init_func">
<code class="sig-name descname">init_func</code><span class="sig-paren">(</span><em class="sig-param">t_start</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup.init_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the function so it is ready to be called to get
the function values.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>t_start</cite>: float</dt><dd><p>The time in seconds in global time. <code class="xref py py-attr docutils literal notranslate"><span class="pre">t_start</span></code>
will be set to this value. All subsequent calls to the
function with a time value will be relative to this given time.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncGroup.init_loop_iteration">
<code class="sig-name descname">init_loop_iteration</code><span class="sig-paren">(</span><em class="sig-param">t_start</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup.init_loop_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the function at the begining of each loop.</p>
<p>It’s called internally at the start of every <code class="xref py py-attr docutils literal notranslate"><span class="pre">loop</span></code> iteration,
except the first.</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">t_start</span></code> will be set to the given value, except if
<code class="xref py py-attr docutils literal notranslate"><span class="pre">duration</span></code> is not negative. Then <code class="xref py py-attr docutils literal notranslate"><span class="pre">t_start</span></code> will simply be
incremented by the <code class="xref py py-attr docutils literal notranslate"><span class="pre">duration</span></code> of the previous loop iteration.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>t_start</cite>: float</dt><dd><p>The time in seconds in global time. All subsequent calls to the
function with a time value will be relative to this given time.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncGroup.remove_func">
<code class="sig-name descname">remove_func</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.FuncGroup.remove_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes sub-function <code class="docutils literal notranslate"><span class="pre">func</span></code> from <a class="reference internal" href="#ceed.function.FuncGroup.funcs" title="ceed.function.FuncGroup.funcs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs</span></code></a>. It must exist in
<a class="reference internal" href="#ceed.function.FuncGroup.funcs" title="ceed.function.FuncGroup.funcs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Params</dt>
<dd class="field-odd"><dl class="simple">
<dt><cite>func</cite>: <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a></dt><dd><p>The function instance to remove.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceed.function.FuncGroup.replace_ref_func_with_source">
<code class="sig-name descname">replace_ref_func_with_source</code><span class="sig-paren">(</span><em class="sig-param">func_ref: ceed.function.CeedFuncRef</em><span class="sig-paren">)</span> &#x2192; Tuple[ceed.function.FuncBase, int]<a class="headerlink" href="#ceed.function.FuncGroup.replace_ref_func_with_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a>, it’ll locate it in <code class="xref py py-attr docutils literal notranslate"><span class="pre">func</span></code> and
replace it with the underlying function.</p>
<p>The caller is responsible for returning the reference with
<a class="reference internal" href="#ceed.function.FunctionFactoryBase.return_func_ref" title="ceed.function.FunctionFactoryBase.return_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.return_func_ref()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func_ref</strong> – The <a class="reference internal" href="#ceed.function.CeedFuncRef" title="ceed.function.CeedFuncRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">CeedFuncRef</span></code></a> to replace in <code class="xref py py-attr docutils literal notranslate"><span class="pre">func</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of <code class="docutils literal notranslate"><span class="pre">(func,</span> <span class="pre">i)</span></code> where <code class="docutils literal notranslate"><span class="pre">func</span></code> is the
<a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> that replaced the reference function. And <code class="docutils literal notranslate"><span class="pre">i</span></code>
is the index in <a class="reference internal" href="#ceed.function.FuncGroup.funcs" title="ceed.function.FuncGroup.funcs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">funcs</span></code></a> where it was found.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ceed.function.CeedFuncRef">
<em class="property">class </em><code class="sig-prename descclassname">ceed.function.</code><code class="sig-name descname">CeedFuncRef</code><span class="sig-paren">(</span><em class="sig-param">function_factory</em>, <em class="sig-param">func=None</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.CeedFuncRef" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A function that refers to another function.</p>
<p>See <a class="reference internal" href="#ceed.function.FunctionFactoryBase.get_func_ref" title="ceed.function.FunctionFactoryBase.get_func_ref"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FunctionFactoryBase.get_func_ref()</span></code></a> and <a class="reference internal" href="#module-ceed.function" title="ceed.function"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ceed.function</span></code></a> for
details.</p>
<dl class="attribute">
<dt id="ceed.function.CeedFuncRef.display">
<code class="sig-name descname">display</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.CeedFuncRef.display" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#ceed.function.FuncBase.display" title="ceed.function.FuncBase.display"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.display</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.CeedFuncRef.func">
<code class="sig-name descname">func</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.CeedFuncRef.func" title="Permalink to this definition">¶</a></dt>
<dd><p>The original <a class="reference internal" href="#ceed.function.FuncBase" title="ceed.function.FuncBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FuncBase</span></code></a> this reference function is referring to.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.CeedFuncRef.function_factory">
<code class="sig-name descname">function_factory</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.CeedFuncRef.function_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#ceed.function.FuncBase.function_factory" title="ceed.function.FuncBase.function_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.function_factory</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="ceed.function.CeedFuncRef.parent_func">
<code class="sig-name descname">parent_func</code><em class="property"> = None</em><a class="headerlink" href="#ceed.function.CeedFuncRef.parent_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#ceed.function.FuncBase.parent_func" title="ceed.function.FuncBase.parent_func"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FuncBase.parent_func</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ceed.function.register_all_functions">
<code class="sig-prename descclassname">ceed.function.</code><code class="sig-name descname">register_all_functions</code><span class="sig-paren">(</span><em class="sig-param">function_factory</em><span class="sig-paren">)</span><a class="headerlink" href="#ceed.function.register_all_functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Call this with a <a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> instance and it will
register all the plugin and built-in functions with the provided
<a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> instance.</p>
<p>It gets and registers all the plugin declared functions using
<a class="reference internal" href="function_plugin.html#ceed.function.plugin.get_plugin_functions" title="ceed.function.plugin.get_plugin_functions"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_plugin_functions()</span></code></a>. See that function
for how to make your plugin functions discoverable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function_factory</strong> – a <a class="reference internal" href="#ceed.function.FunctionFactoryBase" title="ceed.function.FunctionFactoryBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionFactoryBase</span></code></a> instance.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="function_plugin.html" class="btn btn-neutral float-right" title="Function plugins" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Matthew Einhorn

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>